buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:5.1.0'
    }
}

plugins {
    id 'java'
    id 'application'
    id 'jacoco'
    id 'com.github.johnrengelman.shadow' version '5.1.0'
    id 'lt.neworld.jdeploy' version '0.6.0'
    id 'io.franzbecker.gradle-lombok' version '3.1.0'
    id 'com.adarshr.test-logger'
}

dependencies {
    implementation project(':diagram')
    implementation 'net.sourceforge.owlapi:owlapi-distribution:5.1.11'
    implementation 'io.vavr:vavr:0.10.0'
    implementation 'com.beust:jcommander:1.72'

    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.5.1'
    testImplementation 'org.apache.commons:commons-io:1.3.2'
    testImplementation 'org.assertj:assertj-core:3.13.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.5.1'
}

shadowJar {
    baseName = 'owl-cli'
    classifier = null
    version = "$version"
}

test {
    useJUnitPlatform()
    maxHeapSize = '1G'
    ignoreFailures = false
    failFast = true

    filter {
        includeTestsMatching "*Test"
    }
}

jdeploy {
    name = "owl-cli"
    binName = "owl"
    author = "Andreas Textor"
    description = "Command line tool for ontology engineering"
    license = "LGPL"
    repository = "https://github.com/atextor/owl-cli"

    options {
        allowGlobalInstall = true
    }
}

mainClassName = 'de.atextor.owlcli.App'
